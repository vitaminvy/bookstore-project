@page
@model QuanLyNhaSach.Pages.Sach.EditModel
@{
    ViewData["Title"] = "S·ª≠a s√°ch";
}

<h2>‚úèÔ∏è Ch·ªçn s√°ch ƒë·ªÉ s·ª≠a</h2>

<form method="get">
    <div class="row mb-4">
    
        <div class="col-md-4">
            <select name="id" id="sachSelect" class="form-select">
                <option disabled selected>-- Ch·ªçn s√°ch --</option>
                @foreach (var s in Model.AllSachList)
                {
                    <option value="@s.MaSach">@s.MaSach - @s.TieuDe</option>
                }
            </select>
        </div>
    </div>
    <button type="submit" class="btn btn-primary">Ch·ªçn s√°ch</button>
</form>

@if (Model.SachDaChon)
{
    <hr />
    <h3>üìò S·ª≠a th√¥ng tin s√°ch: @Model.MaSach</h3>
    <form method="post">
        <input type="hidden" asp-for="MaSach" />
        <div class="mb-3">
            <label>Ti√™u ƒë·ªÅ</label>
            <input asp-for="TieuDe" class="form-control" />
        </div>
        <div class="mb-3">
            <label>Gi√° b√¨a</label>
            <input asp-for="GiaBia" class="form-control" />
        </div>
        <div class="mb-3">
            <label>M√¥ t·∫£</label>
            <textarea asp-for="MoTa" class="form-control"></textarea>
        </div>
        <div class="mb-3">
            <label>L·∫ßn t√°i b·∫£n</label>
            <input asp-for="LanTaiBan" class="form-control" />
        </div>
        <div class="mb-3">
            <label>NƒÉm xu·∫•t b·∫£n</label>
            <input asp-for="NamXuatBan" class="form-control" />
        </div>
        <div class="mb-3">
            <label>Nh√† xu·∫•t b·∫£n</label>
            <select asp-for="MaNXB" asp-items="Model.NXBList" class="form-control">
                <option value="">-- Ch·ªçn NXB --</option>
            </select>
        </div>
        <div class="mb-3">
            <label>T√¨nh tr·∫°ng</label>
            <select asp-for="TinhTrang" class="form-control">
                <option value="Con hang">C√≤n h√†ng</option>
                <option value="Het hang">H·∫øt h√†ng</option>
                <option value="Tam het">T·∫°m h·∫øt</option>
            </select>
        </div>
        <button type="submit" class="btn btn-success">L∆∞u thay ƒë·ªïi</button>
    </form>
}

@section Scripts {
    <script>
        const filterMa = document.getElementById("filterMa");
        const filterTen = document.getElementById("filterTen");
        const select = document.getElementById("sachSelect");

        function filterOptions() {
            const ma = filterMa.value.toLowerCase();
            const ten = filterTen.value.toLowerCase();
            Array.from(select.options).forEach(opt => {
                if (opt.value && !opt.disabled) {
                    const text = opt.text.toLowerCase();
                    opt.hidden = !(text.includes(ma) && text.includes(ten));
                }
            });
        }

        filterMa.addEventListener("input", filterOptions);
        filterTen.addEventListener("input", filterOptions);
    </script>
}
