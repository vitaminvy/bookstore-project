@page
@model QuanLyNhaSach.Pages.NhanVien.EditNhanVienModel
@{
    ViewData["Title"] = "Sá»­a thÃ´ng tin nhÃ¢n viÃªn"; // ThÃªm Title cho trang
}

<h2>âœï¸ Sá»­a thÃ´ng tin nhÃ¢n viÃªn</h2>

@* Hiá»ƒn thá»‹ thÃ´ng bÃ¡o thÃ nh cÃ´ng hoáº·c lá»—i chung tá»« Model hoáº·c TempData *@
@if (!string.IsNullOrEmpty(Model.SuccessMessage))
{
    <div class="alert alert-success">@Model.SuccessMessage</div>
}
@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success">@TempData["SuccessMessage"]</div>
}
@if (!string.IsNullOrEmpty(Model.PageErrorMessage))
{
    <div class="alert alert-danger">@Model.PageErrorMessage</div>
}
@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger">@TempData["ErrorMessage"]</div>
}


@if (!Model.NhanVienDaChon)
{
    <form method="get">
        @* Form nÃ y dÃ¹ng GET Ä‘á»ƒ chá»n nhÃ¢n viÃªn *@
        <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>
        <div class="input-group mb-3">
            @* Sá»¬A Äá»”I CHÃNH á» ÄÃ‚Y:
                - Sá»­ dá»¥ng asp-for="MaNV" Ä‘á»ƒ liÃªn káº¿t vá»›i thuá»™c tÃ­nh MaNV trong Model (sáº½ chá»©a mÃ£ nhÃ¢n viÃªn Ä‘Æ°á»£c chá»n).
                - Sá»­ dá»¥ng asp-items="Model.AllNhanVienSelectList" Ä‘á»ƒ tá»± Ä‘á»™ng táº¡o cÃ¡c <option>
                  tá»« danh sÃ¡ch SelectListItem trong Model.
                - name="id" Ä‘Æ°á»£c giá»¯ láº¡i Ä‘á»ƒ khi submit form GET nÃ y, giÃ¡ trá»‹ MaNV Ä‘Ã£ chá»n sáº½ Ä‘Æ°á»£c gá»­i lÃªn server
                  dÆ°á»›i dáº¡ng query parameter 'id', khá»›p vá»›i tham sá»‘ 'string? id' cá»§a OnGetAsync.
            *@
            <select name="id" asp-for="MaNV" asp-items="Model.AllNhanVienSelectList" class="form-select">
                @* Má»¥c "-- Chá»n nhÃ¢n viÃªn --" Ä‘Ã£ Ä‘Æ°á»£c thÃªm vÃ o AllNhanVienSelectList trong file .cs *@
            </select>
            <button type="submit" class="btn btn-primary ms-2">Chá»n</button>
        </div>
        <span asp-validation-for="MaNV" class="text-danger"></span> @* Hiá»ƒn thá»‹ lá»—i náº¿u MaNV khÃ´ng Ä‘Æ°á»£c chá»n (cáº§n [Required] trong Model náº¿u báº¯t buá»™c chá»n trÆ°á»›c khi submit) *@
    </form>
}

@if (Model.NhanVienDaChon) // Chá»‰ hiá»ƒn thá»‹ form sá»­a chi tiáº¿t khi Ä‘Ã£ chá»n nhÃ¢n viÃªn
{
    <hr class="my-4" />
    <h4>ThÃ´ng tin chi tiáº¿t cá»§a: @Model.HoTen (@Model.MaNV)</h4>
    <form method="post">
        @* Form nÃ y dÃ¹ng POST Ä‘á»ƒ cáº­p nháº­t thÃ´ng tin *@
        <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>
        <input type="hidden" asp-for="MaNV" /> @* Giá»¯ láº¡i MaNV Ä‘á»ƒ biáº¿t Ä‘ang sá»­a nhÃ¢n viÃªn nÃ o *@

        <div class="mb-3">
            <label asp-for="HoTen" class="form-label">Há» tÃªn</label>
            <input asp-for="HoTen" class="form-control" />
            <span asp-validation-for="HoTen" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="ChucVu" class="form-label">Chá»©c vá»¥</label>
            <select asp-for="ChucVu" class="form-select">
                <option value="">-- Chá»n chá»©c vá»¥ --</option>
                <option value="Quáº£n lÃ½">Quáº£n lÃ½</option>
                <option value="NhÃ¢n viÃªn">NhÃ¢n viÃªn</option>
            </select>
            <span asp-validation-for="ChucVu" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="NgayVaoLam" class="form-label">NgÃ y vÃ o lÃ m</label>
            <input asp-for="NgayVaoLam" type="date" class="form-control" />
            <span asp-validation-for="NgayVaoLam" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="SDT" class="form-label">Sá»‘ Ä‘iá»‡n thoáº¡i</label>
            <input asp-for="SDT" class="form-control" />
            <span asp-validation-for="SDT" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="Email" class="form-label">Email</label>
            <input asp-for="Email" type="email" class="form-control" />
            <span asp-validation-for="Email" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="CCCD" class="form-label">CCCD</label>
            <input asp-for="CCCD" class="form-control" />
            <span asp-validation-for="CCCD" class="text-danger"></span>
        </div>

        <button type="submit" class="btn btn-success">Cáº­p nháº­t thÃ´ng tin</button>

        @* NÃºt xÃ³a nhÃ¢n viÃªn, dÃ¹ng asp-page-handler náº¿u báº¡n cÃ³ handler riÃªng cho xÃ³a trÃªn trang nÃ y,
           hoáº·c asp-page trá» Ä‘áº¿n trang DeleteNhanVien nhÆ° báº¡n Ä‘Ã£ cÃ³. *@
        <a asp-page="/NhanVien/DeleteNhanVien" asp-route-id="@Model.MaNV" class="btn btn-outline-danger ms-2"
           onclick="return confirm('Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xÃ³a nhÃ¢n viÃªn @Model.HoTen (@Model.MaNV)?');">
            ğŸ—‘ï¸ XoÃ¡ nhÃ¢n viÃªn
        </a>
        <a asp-page="/NhanVien/EditNhanVien" class="btn btn-outline-secondary ms-2">Chá»n nhÃ¢n viÃªn khÃ¡c</a>
    </form>
}

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}